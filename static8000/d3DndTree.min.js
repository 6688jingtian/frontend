!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}({0:function(t,e,n){t.exports=n(35)},1:function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},2:function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=h[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(d(r.parts[a],e))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(d(r.parts[a],e));h[r.id]={id:r.id,refs:1,parts:i}}}}function o(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],a=o[0],i=o[1],l=o[2],s=o[3],d={css:i,media:l,sourceMap:s};n[a]?n[a].parts.push(d):e.push(n[a]={id:a,parts:[d]})}return e}function a(t,e){var n=g(),r=x[x.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),x.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function i(t){t.parentNode.removeChild(t);var e=x.indexOf(t);e>=0&&x.splice(e,1)}function l(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function d(t,e){var n,r,o;if(e.singleton){var a=y++;n=m||(m=l(e)),r=c.bind(null,n,a,!1),o=c.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),r=f.bind(null,n),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(e),r=u.bind(null,n),o=function(){i(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function c(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var a=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function u(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var h={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,x=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=o(t);return r(n,e),function(t){for(var a=[],i=0;i<n.length;i++){var l=n[i],s=h[l.id];s.refs--,a.push(s)}if(t){var d=o(t);r(d,e)}for(var i=0;i<a.length;i++){var s=a[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete h[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},9:function(t,e,n){e=t.exports=n(1)(),e.push([t.id,".d3-dnd-tree{position:relative}.d3-dnd-tree .node{cursor:pointer}.d3-dnd-tree .node circle{fill:#fff;stroke:#4682b4;stroke-width:1.5px}.d3-dnd-tree .node text{font-size:12px;font-family:sans-serif}.d3-dnd-tree .link{fill:none;stroke:#ccc;stroke-width:1.5px}.d3-dnd-tree .templink{fill:none;stroke:red;stroke-width:3px}.d3-dnd-tree .ghostCircle.show{display:block}.d3-dnd-tree .activeDrag .ghostCircle,.d3-dnd-tree .ghostCircle{display:none}.d3-tooltip{position:absolute;background:rgba(0,0,0,.6);padding:5px 10px;border-radius:2px;color:#fff;transition:all .25s linear;font-size:12px}.d3-tooltip p{text-indent:2em;margin:0}",""])},34:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(88);var a=function(){function t(){r(this,t),this.restrict="AE",this.replace=!0,this.scope={data:"=",width:"=",height:"=",expandLevel:"=",tooltip:"=getTooltip"},this.template='<div class="d3-dnd-tree"></div>'}return o(t,[{key:"link",value:function(t,e,n){var r=this;d3.select(e[0]).append("svg:svg"),t.$watch("data",function(n){n&&r.draw(n,e,t)}),t.$watch("height",function(n){n&&r.draw(t.data,e,t)}),t.$watch("width",function(n){console.log("watch width:",n),n&&r.draw(t.data,e,t)})}},{key:"draw",value:function(t,e,n){function r(t,e,n){if(t){e(t);var o=n(t);if(o)for(var a=o.length,i=0;i<a;i++)r(o[i],e,n);console.log("visit",t)}}function o(){L.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function a(t,e){var n=b;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(N.attr("transform")),"left"==e||"right"==e?(translateX="left"==e?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):"up"!=e&&"down"!=e||(translateX=translateCoords.translate[0],translateY="up"==e?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=E.scale(),N.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(t).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),E.scale(E.scale()),E.translate([translateX,translateY]),panTimer=setTimeout(function(){a(t,n,e)},50))}function i(){N.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(t,e){x=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),N.selectAll("g.node").sort(function(t,e){return t.id!=x.id?1:-1}),nodes.length>1&&(links=L.links(nodes),nodePaths=N.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=N.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id!=x.id}).remove()),parentLink=L.links(L.nodes(x.parent)),N.selectAll("path.link").filter(function(t,e){return t.target.id==x.id}).remove(),dragStarted=null}function s(){y=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),M(),null!==x&&(h(v),c(x),x=null)}function d(t){t._children&&(t.children=t._children,t.children.forEach(d),t._children=null)}function c(t){var e=-t.y0,n=-t.x0;e+=120,n=0,d3.select("g").transition().duration(k).attr("transform","translate("+e+","+n+")scale(1)")}function u(t){return t.children?(t._children=t.children,t.children=null):t._children&&(t.children=t._children,t._children=null),t}function f(t){d3.event.defaultPrevented||(t=u(t),h(t))}function h(t){var r=arguments,o=[1],a=function t(e,n){n.children&&n.children.length>0&&(o.length<=e+1&&o.push(0),o[e+1]+=n.children.length,n.children.forEach(function(n){t(e+1,n)}))};a(0,v);var i=40*d3.max(o);L=L.size([i,T]),e.find("svg").attr("height",i);var l=L.nodes(v).reverse(),s=L.links(l);l.forEach(function(t){t.y=t.depth*(20*m)});var d=N.selectAll("g.node").data(l,function(t){return t.id||(t.id=++w)}),c=function(t){return n.tooltip?angular.isFunction(n.tooltip)?n.tooltip(t):n.tooltip:t.name},u=4.5,h=d.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",f).on("mouseover",function(t){console.log("hover",t);var n=e.find(".d3-tooltip");0===n.length?(n=$('<div class="d3-tooltip">'+c(t)+"</div>"),e.append(n),n.on("mouseover",function(t){n.css({opacity:1})}).on("mouseout",function(t){n.css({opacity:0})})):n.html(c(t)),n.css({left:t.y+120+2*u,top:t.x+0,opacity:1})}).on("mouseout",function(t){console.log(r),e.find(".d3-tooltip").css("opacity",0)});h.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),h.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),h.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){U(t)}).on("mouseout",function(t){j(t)}),d.select("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}),d.select("circle.nodeCircle").attr("r",u).style("fill",function(t){return t._children?"lightsteelblue":"#fff"});var p=d.transition().duration(k).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});p.select("text").style("fill-opacity",1);var g=d.exit().transition().duration(k).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();g.select("circle").attr("r",0),g.select("text").style("fill-opacity",0);var y=N.selectAll("path.link").data(s,function(t){return t.target.id});y.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return A({source:n,target:n})}),y.transition().duration(k).attr("d",A),y.exit().transition().duration(k).attr("d",function(e){var n={x:t.x,y:t.y};return A({source:n,target:n})}).remove(),l.forEach(function(t){t.x0=t.x,t.y0=t.y})}function p(t,e,n){console.log(e,t),e=e||0;var r="children";e<n?e++:t.children&&u(t),(t[r]||[]).forEach(function(t,r){p(t,e,n)})}var v,g=0,m=0,y=null,x=null,b=200,C=20,w=0,k=750,T=n.width||1280,_=n.height||800,L=d3.layout.tree().size([_,T]),A=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});r(t,function(t){g++,m=Math.max(t.name.length,m)},function(t){return t.children&&t.children.length>0?t.children:null}),o();var E=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",i);e.empty();var R=d3.select(e[0]).append("svg").attr("width",T).attr("height",_).attr("class","overlay"),U=(d3.behavior.drag().on("dragstart",function(t){t!=v&&(dragStarted=!0,nodes=L.nodes(t),d3.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!=v){if(dragStarted&&(domNode=this,l(t,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<C)panTimer=!0,a(this,"left");else if(relCoords[0]>$("svg").width()-C)panTimer=!0,a(this,"right");else if(relCoords[1]<C)panTimer=!0,a(this,"up");else if(relCoords[1]>$("svg").height()-C)panTimer=!0,a(this,"down");else try{clearTimeout(panTimer)}catch(t){}t.x0+=d3.event.dy,t.y0+=d3.event.dx;var e=d3.select(this);e.attr("transform","translate("+t.y0+","+t.x0+")"),M()}}).on("dragend",function(t){if(t!=v)if(domNode=this,y){var e=x.parent.children.indexOf(x);e>-1&&x.parent.children.splice(e,1),"undefined"!=typeof y.children||"undefined"!=typeof y._children?"undefined"!=typeof y.children?y.children.push(x):y._children.push(x):(y.children=[],y.children.push(x)),d(y),o(),s()}else s()}),function(t){y=t,M()}),j=function(t){y=null,M()},M=function(){var t=[];null!==x&&null!==y&&(t=[{source:{x:y.y0,y:y.x0},target:{x:x.y0,y:x.x0}}]);var e=N.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},N=R.append("g");v=t,v.x0=_/2,v.y0=0,h(v),c(v),p(v,0,n.expandLevel||2)}}]),t}();e.default=a},35:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(34),a=r(o);e.default=angular.module("directives.dndTree",[]).directive("d3DndTree",function(){return new a.default}).name},88:function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.id,r,""]]),n(2)(r,{}),r.locals&&(t.exports=r.locals)}});